<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VX School - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="/admin/admin.css">
</head>
<body>
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <h1>üéµ VX School Admin</h1>
            <form id="loginForm" method="POST" autocomplete="off">
                <div class="form-group">
                    <label for="username">–õ–æ–≥–∏–Ω:</label>
                    <input type="text" id="username" name="username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                <button type="submit">–í–æ–π—Ç–∏</button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <div class="admin-panel" id="adminPanel" style="display: none;">
        <header class="admin-header">
            <h1>üéµ VX School - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
            <div class="header-actions">
                <span id="adminUser"></span>
                <button id="logoutBtn" class="logout-btn">–í—ã–π—Ç–∏</button>
            </div>
        </header>

        <nav class="admin-nav">
            <button class="nav-btn active" data-section="dashboard">üìä –î–∞—à–±–æ—Ä–¥</button>
            <button class="nav-btn" data-section="contacts">üìß –ó–∞—è–≤–∫–∏</button>
            <button class="nav-btn" data-section="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button class="nav-btn" data-section="analytics">üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
        </nav>

        <main class="admin-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫</h3>
                        <div class="stat-number" id="totalContacts">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ó–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                        <div class="stat-number" id="todayContacts">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ó–∞ –Ω–µ–¥–µ–ª—é</h3>
                        <div class="stat-number" id="weekContacts">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ü–æ—Å–µ—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è</h3>
                        <div class="stat-number" id="todayVisits">0</div>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="action-buttons">
                        <button class="action-btn" onclick="toggleDiscount()">
                            <span id="discountStatus">–í–∫–ª—é—á–∏—Ç—å —Å–∫–∏–¥–∫—É</span>
                        </button>
                        <button class="action-btn" onclick="togglePackage('basic')">
                            <span id="basicStatus">–û—Ç–∫–ª—é—á–∏—Ç—å –ë–∞–∑–æ–≤—ã–π</span>
                        </button>
                        <button class="action-btn" onclick="togglePackage('group')">
                            <span id="groupStatus">–û—Ç–∫–ª—é—á–∏—Ç—å –ì—Ä—É–ø–ø–æ–≤–æ–π</span>
                        </button>
                        <button class="action-btn" onclick="togglePackage('individual')">
                            <span id="individualStatus">–û—Ç–∫–ª—é—á–∏—Ç—å –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Contacts Section -->
            <section id="contacts" class="content-section">
                <div class="section-header">
                    <h2>–ó–∞—è–≤–∫–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
                    <div class="contacts-actions">
                        <button onclick="refreshContacts()" class="refresh-btn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button onclick="clearAllContacts()" class="danger-btn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                    </div>
                </div>
                
                <div class="contacts-filters">
                    <div class="filter-group">
                        <label for="dateFilter">–ü–µ—Ä–∏–æ–¥:</label>
                        <select id="dateFilter" onchange="filterContacts()">
                            <option value="all">–í—Å–µ –≤—Ä–µ–º—è</option>
                            <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                            <option value="week">–ù–µ–¥–µ–ª—è</option>
                            <option value="month">–ú–µ—Å—è—Ü</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="tariffFilter">–¢–∞—Ä–∏—Ñ:</label>
                        <select id="tariffFilter" onchange="filterContacts()">
                            <option value="all">–í—Å–µ —Ç–∞—Ä–∏—Ñ—ã</option>
                            <option value="–ë–∞–∑–æ–≤—ã–π">–ë–∞–∑–æ–≤—ã–π</option>
                            <option value="–ì—Ä—É–ø–ø–æ–≤–æ–π">–ì—Ä—É–ø–ø–æ–≤–æ–π</option>
                            <option value="–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</option>
                            <option value="–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="searchFilter">–ü–æ–∏—Å–∫:</label>
                        <input type="text" id="searchFilter" placeholder="–ò–º—è –∏–ª–∏ Telegram..." oninput="filterContacts()">
                    </div>
                    
                    <div class="filter-stats">
                        <span id="contactsCount">–ü–æ–∫–∞–∑–∞–Ω–æ: 0 –∏–∑ 0</span>
                    </div>
                </div>
                
                <div class="contacts-table-container">
                    <table class="contacts-table">
                        <thead>
                            <tr>
                                <th onclick="sortContacts('date')" class="sortable">–î–∞—Ç–∞ ‚Üï</th>
                                <th onclick="sortContacts('name')" class="sortable">–ò–º—è ‚Üï</th>
                                <th onclick="sortContacts('telegram')" class="sortable">Telegram ‚Üï</th>
                                <th onclick="sortContacts('tariff')" class="sortable">–¢–∞—Ä–∏—Ñ ‚Üï</th>
                                <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
                                <th>IP</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="contactsTableBody">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞</h2>
                
                <div class="settings-group">
                    <h3>–°–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="discountEnabled"> 
                            –í–∫–ª—é—á–∏—Ç—å —Å–∫–∏–¥–∫—É –Ω–∞ –∫—É—Ä—Å—ã
                        </label>
                        <div class="setting-details">
                            <input type="number" id="discountPercent" placeholder="–†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏ %" min="1" max="90">
                            <input type="text" id="discountText" placeholder="–¢–µ–∫—Å—Ç –∞–∫—Ü–∏–∏">
                            <div class="timer-setting">
                                <label>–û–∫–æ–Ω—á–∞–Ω–∏–µ –∞–∫—Ü–∏–∏:</label>
                                <input type="datetime-local" id="discountEndDate" title="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –±–µ—Å—Å—Ä–æ—á–Ω–æ–π –∞–∫—Ü–∏–∏">
                                <small>–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –±–µ—Å—Å—Ä–æ—á–Ω–æ–π –∞–∫—Ü–∏–∏</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–∞—Ä–∏—Ñ–æ–≤</h3>
                    <div class="setting-item">
                        <label><input type="checkbox" id="basicAvailable" checked> –ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ</label>
                    </div>
                    <div class="setting-item">
                        <label><input type="checkbox" id="advancedAvailable" checked> –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–∞—Ä–∏—Ñ</label>
                    </div>
                    <div class="setting-item">
                        <label><input type="checkbox" id="consultationAvailable" checked> –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</label>
                    </div>
                    <div class="setting-item">
                        <label><input type="checkbox" id="paidConsultationAvailable" checked> –ü–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</label>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>–¶–µ–Ω—ã –Ω–∞ —Ç–∞—Ä–∏—Ñ—ã</h3>
                    <div class="setting-item">
                        <label>–ë–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ (—Ä—É–±.):</label>
                        <input type="number" id="basicPrice" placeholder="10000" min="0">
                    </div>
                    <div class="setting-item">
                        <label>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–∞—Ä–∏—Ñ (—Ä—É–±.):</label>
                        <input type="number" id="advancedPrice" placeholder="30000" min="0">
                    </div>
                    <div class="setting-item">
                        <label>–ü–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è:</label>
                        <input type="text" id="paidConsultationPrice" placeholder="–ü–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    <div class="setting-item">
                        <label>Telegram –¥–ª—è —Å–≤—è–∑–∏:</label>
                        <input type="text" id="contactTelegram" placeholder="@username">
                    </div>
                    <div class="setting-item">
                        <label>Email –¥–ª—è —Å–≤—è–∑–∏:</label>
                        <input type="email" id="contactEmail" placeholder="contact@vxschool.com">
                    </div>
                </div>

                <button onclick="saveSettings()" class="save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="content-section">
                <h2>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π</h2>
                
                <div class="analytics-filters">
                    <select id="analyticsRange">
                        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                        <option value="week">–ù–µ–¥–µ–ª—è</option>
                        <option value="month">–ú–µ—Å—è—Ü</option>
                    </select>
                    <button onclick="loadAnalytics()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>

                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>–ü–æ—Å–µ—â–µ–Ω–∏—è –ø–æ –¥–Ω—è–º</h3>
                        <div id="visitsChart" class="chart-container">
                            <div class="chart-placeholder">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
                        </div>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>–ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞</h3>
                        <div id="trafficSources" class="stats-list">
                            <div class="stat-item">
                                <span>–ü—Ä—è–º—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã</span>
                                <span class="stat-value">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="/admin/admin.js"></script>
</body>
</html>